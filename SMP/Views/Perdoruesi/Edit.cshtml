@model PerdoruesiEditViewModel
@{
    ViewData["Title"] = "Modifiko përdoruesin";
}

<div class="card card-custom">

    <div class="card-header card-header-tabs-line nav-tabs-line-3x">
        <!--begin::Toolbar-->
        <div class="card-toolbar">
            <ul class="nav nav-tabs nav-bold nav-tabs-line nav-tabs-line-3x">
                <li class="nav-item mr-3">
                    <a class="nav-link active" data-toggle="tab" href="#kt_user_edit_tab_2">
                        <span class="nav-icon">
                            <span class="svg-icon">
                                <!--begin::Svg Icon | path:assets/media/svg/icons/General/User.svg-->
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <polygon points="0 0 24 0 24 24 0 24"></polygon>
                                        <path d="M12,11 C9.790861,11 8,9.209139 8,7 C8,4.790861 9.790861,3 12,3 C14.209139,3 16,4.790861 16,7 C16,9.209139 14.209139,11 12,11 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"></path>
                                        <path d="M3.00065168,20.1992055 C3.38825852,15.4265159 7.26191235,13 11.9833413,13 C16.7712164,13 20.7048837,15.2931929 20.9979143,20.2 C21.0095879,20.3954741 20.9979143,21 20.2466999,21 C16.541124,21 11.0347247,21 3.72750223,21 C3.47671215,21 2.97953825,20.45918 3.00065168,20.1992055 Z" fill="#000000" fill-rule="nonzero"></path>
                                    </g>
                                </svg>
                                <!--end::Svg Icon-->
                            </span>
                        </span>
                        <span class="nav-text font-size-lg">Llogaria</span>
                    </a>
                </li>
                <li class="nav-item mr-3">
                    <a class="nav-link" data-toggle="tab" href="#kt_user_edit_tab_3">
                        <span class="nav-icon">
                            <span class="svg-icon">
                                <!--begin::Svg Icon | path:assets/media/svg/icons/Communication/Shield-user.svg-->
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <rect x="0" y="0" width="24" height="24"></rect>
                                        <path d="M4,4 L11.6314229,2.5691082 C11.8750185,2.52343403 12.1249815,2.52343403 12.3685771,2.5691082 L20,4 L20,13.2830094 C20,16.2173861 18.4883464,18.9447835 16,20.5 L12.5299989,22.6687507 C12.2057287,22.8714196 11.7942713,22.8714196 11.4700011,22.6687507 L8,20.5 C5.51165358,18.9447835 4,16.2173861 4,13.2830094 L4,4 Z" fill="#000000" opacity="0.3"></path>
                                        <path d="M12,11 C10.8954305,11 10,10.1045695 10,9 C10,7.8954305 10.8954305,7 12,7 C13.1045695,7 14,7.8954305 14,9 C14,10.1045695 13.1045695,11 12,11 Z" fill="#000000" opacity="0.3"></path>
                                        <path d="M7.00036205,16.4995035 C7.21569918,13.5165724 9.36772908,12 11.9907452,12 C14.6506758,12 16.8360465,13.4332455 16.9988413,16.5 C17.0053266,16.6221713 16.9988413,17 16.5815,17 C14.5228466,17 11.463736,17 7.4041679,17 C7.26484009,17 6.98863236,16.6619875 7.00036205,16.4995035 Z" fill="#000000" opacity="0.3"></path>
                                    </g>
                                </svg>
                                <!--end::Svg Icon-->
                            </span>
                        </span>
                        <span class="nav-text font-size-lg">Ndrysho fjalëkalimin</span>
                    </a>
                </li>
            </ul>
        </div>
        <!--end::Toolbar-->
    </div>

    <div class="card-body">
        <div class="tab-content">
            <div class="tab-pane active px-7" id="kt_user_edit_tab_2">
                <form class="form" method="post">
                    @*<input asp-for="Id" hidden />
                    <input asp-for="resetPassword.Password" hidden id="passwordfield" />
                    <input asp-for="resetPassword.ConfirmPassword" hidden id="confirmpasswordfield" />*@
                    <div style="display:none">
                        @Html.HiddenFor(m => Model.Id)
                        @Html.HiddenFor(m => Model.resetPassword.Password, new { id = "passwordfield" })
                        @Html.HiddenFor(m => Model.resetPassword.ConfirmPassword, new { id = "confirmpasswordfield" })
                    </div>
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>


                    <div class="row">
                        <div class="col-xl-2"></div>
                        <div class="col-xl-7 my-2">
                            <div class="row">
                                <label class="col-form-label col-3 text-lg-right text-left"></label>
                                <div class="col-9">
                                    <h5 class="font-weight-bold mb-6">Imazhi i profilit të përdoruesit</h5>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-form-label col-3 text-lg-right text-left"></label>
                                <div class="col-9">
                                    <div class="symbol symbol-100 mr-5">
                                        @if (Model.UserProfile != null)
                                        {
                                            <div class="symbol-label" style="background-image:url('@Model.UserProfile')"></div>
                                            <i class="symbol-badge bg-success"></i>
                                        }
                                        else
                                        {
                                            <div class="symbol-label" style="background-image:url('/assets/media/users/blank.png')"></div>
                                            <i class="symbol-badge bg-success"></i>
                                        }
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <label class="col-form-label col-3 text-lg-right text-left"></label>
                                <div class="col-9">
                                    <h5 class="font-weight-bold mb-6">Informatat e përdoruesit</h5>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-form-label col-3 text-lg-right text-left required">Roli</label>
                                <div class="col-9">
                                    @Html.DropDownListFor(m => m.RoleId, null, null, htmlAttributes: new { @class = "form-control form-control-lg form-control-solid" })
                                    @Html.ValidationMessageFor(m => m.RoleId, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            @if (Model.RoleName == "HR")
                            {
                                <div class="form-group row" id="kompania-field">
                                    <label class="col-form-label col-3 text-lg-right text-left required">Kompania</label>
                                    <div class="col-9">
                                        @Html.DropDownListFor(m => m.KompaniaId, null, null, htmlAttributes: new { @class = "form-control form-control-lg form-control-solid" })
                                        @Html.ValidationMessageFor(m => m.KompaniaId, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            }

                            <div class="form-group row">
                                <label class="col-form-label col-3 text-lg-right text-left required">Emri</label>
                                <div class="col-9">
                                    @Html.TextBoxFor(m => m.FirstName, new { @class = "form-control form-control-lg form-control-solid", @placeholder = "Emri" })
                                    @Html.ValidationMessageFor(m => m.FirstName, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-form-label col-3 text-lg-right text-left required">Mbiemri</label>
                                <div class="col-9">
                                    @Html.TextBoxFor(m => m.LastName, new { @class = "form-control form-control-lg form-control-solid", @placeholder = "Mbiemri" })
                                    @Html.ValidationMessageFor(m => m.LastName, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="row">
                                <label class="col-form-label col-3 text-lg-right text-left"></label>
                                <div class="col-9">
                                    <h5 class="font-weight-bold mt-10 mb-6">Kontakti</h5>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-form-label col-3 text-lg-right text-left required">Email</label>
                                <div class="col-9">
                                    @Html.TextBoxFor(m => m.Email, new { @class = "form-control form-control-lg form-control-solid", @placeholder = "Email" })
                                    @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
                                    <span class="form-text text-muted">
                                        Email do të përdoret për qasje në sistem
                                    </span>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-form-label col-3 text-lg-right text-left required">Telefoni</label>
                                <div class="col-9">
                                    @Html.TextBoxFor(m => m.PhoneNumber, new { @class = "form-control form-control-lg form-control-solid", @placeholder = "Telefoni" })
                                    @Html.ValidationMessageFor(m => m.PhoneNumber, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="row">
                                <label class="col-form-label col-3 text-lg-right text-left"></label>
                                <div class="col-9">
                                    <h5 class="font-weight-bold mt-10 mb-6">Adresa</h5>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-form-label col-3 text-lg-right text-left">Adresa</label>
                                <div class="col-9">
                                    @Html.TextBoxFor(m => m.Address, new { @class = "form-control form-control-lg form-control-solid", @placeholder = "Adresa" })
                                    @Html.ValidationMessageFor(m => m.Address, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xl-2"></div>
                        <div class="col-xl-7">
                            <div class="row">
                                <div class="col-3"></div>
                                <div class="col-9">
                                    <button type="submit" class="btn btn-light-primary font-weight-bold">Ruaj</button>
                                    <a href="#" class="btn btn-clean font-weight-bold">Anulo</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="tab-pane px-7" id="kt_user_edit_tab_3">
                <form class="form" asp-action="ResetPassword" method="post">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <input asp-for="resetPassword.UserId" hidden />

                    <div class="row">
                        <div class="col-xl-2"></div>
                        <div class="col-xl-7">
                            <div class="form-group row">
                                <label class="col-form-label col-3 text-lg-right text-left required">Fjalëkalimi i ri</label>
                                <div class="col-9">
                                    @Html.PasswordFor(m => m.resetPassword.Password, new { @class = "form-control form-control-lg form-control-solid", @placeholder = "Fjalëkalimi i ri" })
                                    @Html.ValidationMessageFor(m => m.resetPassword.Password, "", new { @class = "text-danger" })
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-form-label col-3 text-lg-right text-left required">Konfirmo fjalëkalimin</label>
                                <div class="col-9">
                                    @Html.PasswordFor(m => m.resetPassword.ConfirmPassword, new { @class = "form-control form-control-lg form-control-solid", @placeholder = "Konfirmo fjalëkalimin" })
                                    @Html.ValidationMessageFor(m => m.resetPassword.ConfirmPassword, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xl-2"></div>
                        <div class="col-xl-7">
                            <div class="row">
                                <div class="col-3"></div>
                                <div class="col-9">
                                    <button type="submit" class="btn btn-light-primary font-weight-bold">Ruaj</button>
                                    <a href="#" class="btn btn-clean font-weight-bold">Anulo</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>



@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script type="text/javascript">
    $(document).ready(function () {
        $('#RoleId').change(function () {
            var RoleId = $("#RoleId").find(":selected").val();

            if (RoleId == "f638f4c0-065e-45da-bae4-63e71713e1c2") {
                $("#kompania-field").show();

            }
            else {
                $("#kompania-field").hide();

            }
        });
    });
    </script>
}